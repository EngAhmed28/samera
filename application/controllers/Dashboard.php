<?phpclass Dashboard extends CI_Controller{    public $mass;    public function __construct()    {        parent::__construct();        $this->load->library('pagination');        $this->load->library('form_validation');             $this->load->helper(array('url','text','permission','form','download'));        $this->load->library('encrypt');        $this->load->model('Contact');        $this->load->model('Groups');        $this->load->model('Difined_model');        $this->message=$this->Difined_model->record_count("contact");        $this->main_groups=$this->Groups->fetch_groups("","");        $this->groups=$this->Groups->get_group($_SESSION["group_number"]);        $this->mass = $this->Contact->getallinbox();  if($this->session->userdata('is_logged_in')==0){            redirect('login');        }      // var_dump($_SESSION);    }        public function Greg2Hijri(/*$day, $month, $year*/){    /*$day   = (int) $day;    $month = (int) $month;    $year  = (int) $year;*/        $day   = (int) date("d");    $month = (int) date("m");    $year  = (int) date("Y");    if (($year > 1582) or (($year == 1582) and ($month > 10)) or (($year == 1582) and ($month == 10) and ($day > 14)))    {        $jd = $this->intPart((1461*($year+4800+$this->intPart(($month-14)/12)))/4)+$this->intPart((367*($month-2-12*($this->intPart(($month-14)/12))))/12)-        $this->intPart( (3* ($this->intPart(  ($year+4900+    $this->intPart( ($month-14)/12)     )/100)    )   ) /4)+$day-32075;    }    else    {        $jd = 367*$year-$this->intPart((7*($year+5001+$this->intPart(($month-9)/7)))/4)+$this->intPart((275*$month)/9)+$day+1729777;    }    $l = $jd-1948440+10632;    $n = $this->intPart(($l-1)/10631);    $l = $l-10631*$n+354;    $j = ($this->intPart((10985-$l)/5316))*($this->intPart((50*$l)/17719))+($this->intPart($l/5670))*($this->intPart((43*$l)/15238));    $l = $l-($this->intPart((30-$j)/15))*($this->intPart((17719*$j)/50))-($this->intPart($j/16))*($this->intPart((15238*$j)/43))+29;        $month = $this->intPart((24*$l)/709);    $day   = $l-$this->intPart((709*$month)/24);    $year  = 30*$n+$j-30;        $date = array();    $date['year']  = $year;    $date['month'] = $month;    $date['day']   = $day;    /*if (!$string)        return $date;    else*/        return     "{$day}-{$month}-{$year}";}  public  function intPart($float){    if ($float < -0.0000001)        return ceil($float - 0.0000001);    else        return floor($float + 0.0000001);}        private  function test($data=array()){        echo "<pre>";        print_r($data);        echo "</pre>";     //   die;    }    /**     * @param $type     success     * @param $type     wiring     * @param $type     error     */    private function message($type,$text){        if($type =='success') {            return $this->session->set_flashdata('message','<div class="alert alert-success alert-dismissible shadow" data-sr="wait 0s, then enter bottom and hustle 100%"><button type="button" class="close pull-left" data-dismiss="alert">×</button><h4 class="text-lg"><i class="fa fa-check icn-xs"></i> تم بنجاح ...</h4><p>'.$text.'!</p></div>');        }elseif($type=='wiring'){            return $this->session->set_flashdata('message','<div class="alert alert-warning alert-dismissible" data-sr="wait 0.6s, then enter bottom and hustle 100%"><button type="button" class="close pull-left" data-dismiss="alert">×</button><h4 class="text-lg"><i class="fa fa-exclamation-triangle icn-xs"></i> تحذير هام ...</h4><p>'.$text.'</p></div>');        }elseif($type=='error'){            return  $this->session->set_flashdata('message', '<div class="alert alert-danger alert-dismissible" data-sr="wait 0.3s, then enter bottom and hustle 100%"><button type="button" class="close pull-left" data-dismiss="alert">×</button><h4 class="text-lg"><i class="fa fa-exclamation-circle icn-xs"></i> خطآ ...</h4><p>'.$text.'</p></div>');        }    }    private function thumb($data)    {        $config['image_library'] = 'gd2';        $config['source_image'] =$data['full_path'];        $config['new_image'] = 'uploads/thumbs/'.$data['file_name'];        $config['create_thumb'] = TRUE;        $config['maintain_ratio'] = TRUE;        $config['thumb_marker']='';        $config['width'] = 275;        $config['height'] = 250;        $this->load->library('image_lib', $config);        $this->image_lib->resize();    }    private  function upload_image($file_name){        $config['upload_path'] = 'uploads/images';        $config['allowed_types'] = 'gif|Gif|ico|ICO|jpg|JPG|jpeg|JPEG|BNG|png|PNG|bmp|BMP|WMV|wmv|MP3|mp3|FLV|flv|SWF|swf';        $config['max_size']    = '1024*8';        $config['encrypt_name']=true;        $this->load->library('upload',$config);        if(! $this->upload->do_upload($file_name)){            return  false;        }else{            $datafile = $this->upload->data();            $this->thumb($datafile);            return  $datafile['file_name'];        }        //  unlink($datafile['full_path']);    }    //////////////////////////////////    private  function upload_file($file_name){        $config['upload_path'] = 'uploads/files';        $config['allowed_types'] = 'gif|Gif|ico|ICO|jpg|JPG|jpeg|JPEG|BNG|png|PNG|bmp|BMP|WMV|wmv|MP3|mp3|FLV|flv|SWF|swf|pdf|PDF|xls|xlsx|mp4|doc|docx|txt|rar|tar.gz|zip';        $config['max_size']    = '1024*8';        //$config['encrypt_name']=true;        $config['overwrite'] = true;        $this->load->library('upload',$config);        if(! $this->upload->do_upload($file_name)){            return  false;        }else {            $datafile = $this->upload->data();            return $datafile['file_name'];        }    }    ////////////////////end of excel library option    private function url (){        unset($_SESSION['url']);        $this->session->set_flashdata('url','http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);    }    ///////////////////////////////    private  function sendmail($from,$name,$to=array(),$cc=false,$bcc=false,$subject,$message,$attach=false)    {        $this->load->library('email');        $this->email->from($from, $name);        $this->email->to($to);        $this->email->cc($cc);        $this->email->bcc($bcc);        $this->email->subject($subject);        $this->email->message($message);        $this->email->attach($attach);        if(!$this->email->send())        {            // return show_error($this->email->print_debugger());            return false;        }        else        {            return true;        }    }    /**@     * @param $method     * @param $recordcount     * @param $per_page     * @return array     */    private function pagnate($method,$recordcount,$per_page){        $config = array();        $config["base_url"] = base_url() . "dashboard/".$method;        $config["total_rows"] = $recordcount;        $config["per_page"] = $per_page;        $config["uri_segment"] = 3;        $config['use_page_numbers'] = TRUE;        $config['full_tag_open'] = '<ul class="pagination" >';        $config['full_tag_close'] = '</ul>';        $config['first_link'] = '<li class="disabled"><a href="#">«</a></li>';        $config['last_link'] = '<li><a href="#">»</a></li>';        $config['first_tag_open'] = '<li>';        $config['first_tag_close'] = '</li>';        $config['prev_link'] = '&laquo';        $config['prev_tag_open'] = '<li class="prev">';        $config['prev_tag_close'] = '</li>';        $config['next_link'] = '&raquo';        $config['next_tag_open'] = '<li>';        $config['next_tag_close'] = '</li>';        $config['last_tag_open'] = '<li>';        $config['last_tag_close'] = '</li>';        $config['cur_tag_open'] = '<li class="active"><a href="#">';        $config['cur_tag_close'] = '</a></li>';        $config['num_tag_open'] = '<li>';        $config['num_tag_close'] = '</li>';        $this->pagination->initialize($config);        return $config;    }    /////////////////////////main page    public function  index(){        //$this->test(setpermition());      /*  $this->url();        $data['title'] ='لوحة التحكم';        $this->load->model('Users');        $data['users_num'] = $this->Users->record_count();        $this->load->model('Members');        $data['members_num'] = $this->Members->record_count();        $this->load->model('News');        $data['news_num'] = $this->News->record_count_all(0);        $data['journal_num'] = $this->News->record_count_all(1);        $this->load->model('Person');        $data['person'] = $this->Person->record_count();        $data['accepted'] = $this->Person->record_count2();        $data['refused'] = $this->Person->record_count3();        $this->load->model('Album');        $data['album_num'] = $this->Album->record_count();//****************************************************************        $this->load->model('Get_statics');        $data['vounter_num'] = $this->Get_statics->record_count('volunteer','volunteer_type',1);        $data['vounter_team_num'] = $this->Get_statics->record_count('volunteer','volunteer_type',2);        $data['works'] = $this->Get_statics->record_count('all_works','suspend',1);        $data['works_read'] = $this->Get_statics->record_count1('all_works','type',1);        $data['works_vedio'] = $this->Get_statics->record_count1('all_works','type',2);//*******************************************************************        $data['subview'] = 'admin/home';        $this->load->view('index', $data); */        $this->load->view('admin/home');    }    public function addgroup(){        $this->url();        $this->load->model('Groups');        if ($this->input->post('add_groupe') == true) {            if ($this->Groups->addGroup()) {                $this->message('success','تمت إضافة المجموعة بنجاح');            } else {                $this->message('error','خطأ تأكد من البيانات ');            }        }        $config = array();$config["base_url"] = base_url() . "dashboard/addgroup";        // $config["total_rows"] = $this->Groups->record_count();        // $config["per_page"] = 10;$config["uri_segment"] = 3;$config['use_page_numbers'] = TRUE;$config['full_tag_open'] = '<ul class="pagination">';$config['full_tag_close'] = '</ul>';$config['first_link'] = '<li class="disabled"><a href="#">«</a></li>';$config['last_link'] = '<li><a href="#">»</a></li>';$config['first_tag_open'] = '<li>';$config['first_tag_close'] = '</li>';$config['prev_link'] = '&laquo';$config['prev_tag_open'] = '<li class="prev">';$config['prev_tag_close'] = '</li>';$config['next_link'] = '&raquo';$config['next_tag_open'] = '<li>';$config['next_tag_close'] = '</li>';$config['last_tag_open'] = '<li>';$config['last_tag_close'] = '</li>';$config['cur_tag_open'] = '<li class="active"><a href="#">';$config['cur_tag_close'] = '</a></li>';$config['num_tag_open'] = '<li>';$config['num_tag_close'] = '</li>';        // $this->pagination->initialize($config);        // $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;        $data["groups"] = $this->Groups->fetch_groups('', '');        //   $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة مجموعة تحكم';        $data['metakeyword'] = 'اعداددات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/groups/group';        $this->load->view('index', $data);    }    public function delete_group_by_id($id)    {        $this->db->where('group_id', $id);        $this->db->delete('groups');        redirect('dashboard/addgroup');    }    public function update_group_by_id()    {        $this->url();        $data['id'] = $this->uri->segment(3);        $this->load->model('Groups');        $data['result_id'] = $this->Groups->getgroupbyid($data['id']);        if ($this->input->post('edit_groupe')) {            $update = array('group_title' => $this->input->post('group_title'),                'group_order' => $this->input->post('group_order'),                'group_icon_code' => $this->input->post('group_icon_code'),                'group_link' => $this->input->post('group_link'));            if ($this->Groups->updateGroup($data['id'], $update) == 1) {                $this->message('success','تم تعديل البيان بنجاح');                redirect('dashboard/addgroup', 'refresh');            } else {                $this->message('error','خطأ فى التعديل حاول مرة اخرى');            }        }        $data['title'] = 'تعديل بيانات مجموعة تحكم';        $data['metakeyword'] = 'اعداددات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/groups/group';        $this->load->view('index', $data);    }    ////////////////////////pages    public function add_page()    {        $this->url();        $this->load->model('Pages');        if ($this->input->post('add_page') == true) {            if ($this->Pages->insert() == true) {                $this->message('success','تم اضافة الصفحة بنجاح');            } else {                $this->message('error','خطأ فى الادخال حاول مرة اخرى');            }        }        $config=$this->pagnate('add_page',$this->Pages->record_count(),50);        $data["pages"] = $this->Pages->select($config["per_page"],$config["uri_segment"]);        $data["links"] = $this->pagination->create_links();        $data['groups']=$this->Pages->get_all_groups();        $data['title'] = 'إضافة صفحات مجموعات التحكم  ';$data['metakeyword'] = 'اعداددات الموقع ';$data['metadiscription'] = '';        $data['subview'] = 'admin/groups/pages';        $this->load->view('index', $data);    }    public function update_pages_by_id()    {        $this->url();        $data['pages']='';        $data['id'] = $this->uri->segment(3);        $this->load->model('Pages');        $data['page_data'] = $this->Pages->get_by_id($data['id']);        if ($this->input->post('edit_page')) {            $update = array('page_title' => $this->input->post('page_title'),                'page_link' => $this->input->post('page_link'),                'page_order' => $this->input->post('page_order'),                'page_icon_code'=>$this->input->post('page_icon_code'),                'group_id_fk' => $this->input->post('group_id_fk'));            if ($this->Pages->update($data['id'], $update) == 1) {                $this->message('success','تم العملية بنجاح');                redirect('dashboard/add_page', 'refresh');            } else {                $this->message('error','خطأ فى عملية التعديل حاول مرة اخرى');            }        }        $data['groups']=$this->Pages->get_all_groups();        $data['title'] = 'تعديل بيانات صفحات التحكم';        $data['metakeyword'] = 'اعداددات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/groups/pages';        $this->load->view('index', $data);    }    public function delete_page_by_id($id)    {        $this->db->where('page_id', $id);        $this->db->delete('pages');        redirect('dashboard/add_page');    }    //////////////////////////////roles public function ahmed(){    $this->load->model('Difined_model');    $this->test($this->Difined_model->select_all('permissions',"","","",""));     }     public  function  create_role(){        $this->load->model('Groups');        $this->load->model('Roles');        $this->load->model('Difined_model');        $this->load->model('Permission');        $data["results_main"]=$this->Groups->get_categories();        $data["user_in"]=$this->Permission->user_in();        if ($this->input->post('add_role') ) {       // $this->test($_POST);            $this->Permission->insert_user_role();            $this->message('success','تم إضافة الدور بنجاح');            redirect('dashboard/create_role', 'refresh');        }        $data['users']=$this->Difined_model->select_all("users","user_id","","user_id","DESC");     //  $this->test($data['users']);        $data['per_table']=$this->Difined_model->select_all("permissions","user_id","","user_id","DESC");//        $data["user_name"]=$this->Permission->users_name();        $data['title'] = 'إضافة أدوار التحكم';        $data['metakeyword'] = 'إعدادات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/roles';        $this->load->view('index', $data);    }    public function update_role($id){        $this->load->model('Groups');        $this->load->model('Roles');        $this->load->model('Difined_model');        $this->load->model('Permission');        $data['users']=$this->Difined_model->select_all("users","user_id","","user_id","DESC");        $data["results_main"]=$this->Groups->get_categories();        $data['user_data'] = $this->Difined_model->getByArray("users",array("user_id"=>$id));        $data["user_permations"]=$this->Permission->select_per($id);        if ($this->input->post('edit_role')) {            $this->Difined_model->delete('permissions',array("user_id"=>$id));            $this->Permission->insert_user_role();            $this->message('success','تم التعديل بنجاح');            redirect('dashboard/create_role', 'refresh');        }        $data['title'] = 'تعديل دور التحكم';        $data['metakeyword'] = 'اعداددات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/roles';        $this->load->view('index', $data);    }    public  function  deleteRole($id){        $this->load->model('Roles');        $this->Roles->delete($id);        redirect('dashboard/create_role');    }  /*   public  function  create_role(){        $this->url();        $data['title'] = 'إضافة أدوار التحكم';$data['metakeyword'] = 'إعدادات الموقع ';$data['metadiscription'] = '';        $data['subview'] = 'admin/users/roles';        $this->load->model('Roles');        if ($this->input->post('add_role') == true) {            if ($this->Roles->insert() == true) {                $this->message('success','تم إضافة الدور بنجاح');            } else {                $this->message('error','خطأ فى الإدخال حاول مرة اخرى');            }        }        $data['roles']=$this->Roles->select();        $this->load->view('index', $data);    }    public  function  deleteRole($id){        $this->load->model('Roles');        $this->Roles->delete($id);        redirect('dashboard/create_role');    }    public function update_role($id){        $this->url();        $data['roles']='';        $this->load->model('Roles');        $data['role_data'] = $this->Roles->get_by_id($id);        if ($this->input->post('edit_role')) {            if ($this->Roles->update($id) == 1) {                $data['message'] = $this->message('success','تم التعديل بنجاح');                redirect('dashboard/create_role', 'refresh');            } else {                $this->message('error','خطأ فى حفظ التعديلات  حاول مرة اخرى');            }        }        $data['title'] = 'تعديل دور التحكم';        $data['metakeyword'] = 'اعداددات الموقع ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/roles';        $this->load->view('index', $data);    } */    //////////////////////users    public function add_user(){        $this->load->model('Users');        $this->load->model('Roles');        $this->load->model('Difined_model');        if ($this->input->post('add_user')) {            /////////////////////            $file_name='user_photo';            $file= $this->upload_image($file_name);            if($file == false){                $file='user.png';                $this->message('error','نوع الملفات غير مسموح به');            }            //////////////////////////////////            if ($this->Users->insert($file)) {                $this->message('success','تم إضافة مستخدم بنجاح');            } else {                $this->message('error','لم تتم العملية بشكل سليم تأكد من البيانات ');            }        }       // $data["users"] = $this->Users->fetch_users($config["per_page"], $page);            $data['records']=$this->Difined_model->select_all("users","","","user_id","DESC");            $data['roles']=$this->Roles->select();            $data['title'] = 'إضافة مستخدم جديد';            $data['metakeyword'] = 'اعدادات المستخدمين';            $data['metadiscription'] = '';            $data['subview'] = 'admin/users/users';            $this->load->view('index', $data);           }    public function update_user_by_id($id){       $this->load->model('Users');        $this->load->model('Roles');        $this->load->model('Difined_model');       // $data['user_row']=$this->Users->display($id);        $data['result'] =$this->Difined_model->getByArray("users",array("user_id"=>$id));       // $data['result2'] = $this->App->records_select_user2($data['user_row']['vounter_id'],$data['user_row']['role_id_fk']);      //  $data['users']='';        if ($this->input->post('edit_user')) {            $file_name='user_photo';            $file= $this->upload_image($file_name);            if ($this->Users->update($id,$file)) {                $this->message('success','تم تعديل البيانات');                redirect('dashboard/add_user', 'refresh');            } else {                $this->message('error','خطأ فى حفظ التعديلات  حاول مرة أخرى');            }        }        $data['roles']=$this->Roles->select();        $data['title'] = 'تعديل بيانات المستخدم';        $data['metakeyword'] = 'اعداددات المستخدمين ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/users';        $this->load->view('index', $data);    }    //--------------------------------------------------------------    public function UpdatePassKey($id){          $this->load->model('Users');        $this->Users->update_pass($id);        $this->message('success','تم تعديل كلمة المرور');                redirect('dashboard/update_user_by_id/'.$id, 'refresh');    }     //-----------------------------------------------------------------------------------------     public function users_data()    {        $this->load->model('Users');        $data['records'] = $this->Users->select();        $data['title'] = 'بيانات المستخدمين';        $data['metakeyword'] = 'بيانات المستخدمين';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/users_data';        $this->load->view('index', $data);    }    public function delete_user_by_id($id){        $this->load->model('Users');        $this->Users->delete($id);        redirect('dashboard/add_user');    }            public function patron(){        $this->url();        $this->load->model('Users');        if ($this->input->post('edit_user')) {            $file= $this->upload_image('user_photo');            $this->Users->update($_SESSION['user_id'],$file);            /*if ($this->Users->update($_SESSION['user_id'],$file) == 1) {            //$this->load->library('email');$this->email->from($_SESSION['school_email'],$_SESSION['school_name']);$this->email->to($this->input->post('user_email'));$this->email->subject($_SESSION['school_name']. 'بيانات الحساب');            //$this->email->message("شكرا لك تم التسجيل فى نظام الرسوم المدرسية  بيانات التسجيل الخاصة بك هى : اسم الدخول:".$this->input->post('user_username')." كلمة المرور هى :" . $this->input->post('user_pass'). "يمكنك الدخول عبر الرابط التالى ".base_url());            //$this->email->send();            //$this->message('success','تم تعديل بياناتك الشخصية وارسال المعلومات عبر البريد الاليكترونى');            redirect('dashboard', 'refresh');        } else {            $this->message('error','خطأ فى حفظ التعديلات  حاول مرة أخرى');        }*/            $this->message('success','تم تعديل بياناتك الشخصية ');            redirect('dashboard', 'refresh');        }        $data['title'] = 'تعديل بيانات المستخدم';        $data['metakeyword'] = 'اعداددات المستخدمين ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/users/patron';        $this->load->view('index', $data);    }    public  function systembacup(){        $this->load->dbutil();        $this->load->helper(array('file', 'download'));        $backup =& $this->dbutil->backup();        $filename = 'backup-' . time() . ' .zip';        write_file('/asisst/backup/databases/' . $filename, $backup);        force_download($filename, $backup);    }    public  function backup(){        $data['title'] = 'النسخ الاحتياطى للبيانات';        $data['metakeyword'] = 'اعدادات الحماية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/backup';        $this->load->view('index',$data);    }    public function mailbox(){        $this->load->model("Mailbox");        if($this->input->post('send')=='send' && $this->input->post('to')!=""){            $file_name='attachment';            $file= $this->upload_file($file_name);            if($this->Mailbox->sendmessage($file)==true){                $this->message('success','تم ارسال الرسالة بنجاح');            }else{                $this->message('error','خطا فى الارسال من فضلك تاكد من البيانات');            }        }        $data['users']=$this->Mailbox->getallusers();        $data['messages']=$this->Mailbox->getallmessage();        //$this->test($data['messages']);        $data['title'] = 'البريد الإليكترونى';        $data['metakeyword'] = 'إعدادات البريد الاليكترونى ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/message/mailbox';        $this->load->view('index',$data);    }    public function readmessage($id){        $this->load->model("Mailbox");        $data["result"]=$this->Mailbox->getmessagebyid($id);        $data['title'] = 'عرض رسالئل البريد الاليكترونى ';        $data['metakeyword'] = 'إعدادات البريد الاليكترونى ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/message/readmessage';        $this->load->view('index',$data);    }    public function viewmessage($id){        $this->load->model("Contact");        $data["result"]=$this->Contact->getmessagebyid($id);        $this->Contact->readmessagebyid($id);        $data['title'] = 'عرض رسائل البريد الألكتروني';        $data['metakeyword'] = 'إعدادات البريد الألكتروني';        $data['metadiscription'] = '';        $data['subview'] = 'admin/contact/viewmessage';        $this->load->view('index',$data);        //redirect('dashboard/viewmessage/'.$id.'');    }    /**     *     *     * ABOUT     *     *     * */    public function addabout(){        $this->load->model('About');        if ($this->input->post('add_about')){            $file_name='img';            $file= $this->upload_image($file_name);            $date = $this->Greg2Hijri();            $this->About->insert($file,$date);            $this->message('success','إضافة بيانات الجمعية');            redirect('dashboard/addabout','refresh');        }        $config=$this->pagnate('addabout',$this->About->record_count(),50);        $data['records']=$this->About->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة بيانات عن الجمعية';        $data['metakeyword'] = 'إعدادات بيانات الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/about';        $this->load->view('index', $data);    }    public function deleteabout($id){        $this->load->model('About');        $this->About->delete($id);        redirect('dashboard/addabout');    }    public function updateabout($id){        $this->load->model('About');        if($this->input->post('update')){            $file_name='img';            $file= $this->upload_image($file_name);            $date = $this->Greg2Hijri();            $this->About->update($id,$file,$date);            $this->message('success','تعديل بيانات الجمعية');            redirect('dashboard/addabout','refresh');        }        $data['result']=$this->About->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل بيانات الجمعية';        $data['metakeyword'] = 'إعدادات بيانات  الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/about';        $this->load->view('index', $data);    }    public function suspendAbout($id,$clas){        $this->load->model('About');        $this->About->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','بيان الجمعية نشط');        else            $this->message('success','بيان الجمعية غير نشط');        redirect('dashboard/addabout');    }    /**     *     *     * MEMBERS     *     *     * */    # -----------------------------------------------------------------------------------------------------------------------------------##                                              //أعضاء مجلس الإدارة //                                                 ## -----------------------------------------------------------------------------------------------------------------------------------#    public function addmembers(){        $this->load->model('Members');        if ($this->input->post('add')){            $this->Members->insert();            $this->message('success','إضافة عضو');            redirect('dashboard/addmembers');        }        $config=$this->pagnate('addmembers',$this->Members->record_count(),50);        $data['records']=$this->Members->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['checked']=$this->Members->select_ss();        $data['title'] = 'إضافة عضو';        $data['metakeyword'] = 'إعدادات عضو';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/members';        $this->load->view('index', $data);    }    public function deletemembers($id){        $this->load->model('Members');        $this->Members->delete($id);        redirect('dashboard/addmembers');    }    public function updatemembers($id){        $this->load->model('Members');        if($this->input->post('update')){            $this->Members->update($id);            $this->message('success','تعديل بيانات العضو');            redirect('dashboard/addmembers','refresh');        }        $data['records']=$this->Members->select($config["per_page"]);        $data['result']=$this->Members->getById($id);        $data["links"] = $this->pagination->create_links();        $data['checked']=$this->Members->select_ss();        $data['title'] = 'تعديل بيانات عضو';        $data['metakeyword'] = 'إعدادات بيانات  العضو';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/members';        $this->load->view('index', $data);    }    public function suspendmembers($id,$clas){        $this->load->model('Members');        $this->Members->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','العضو نشط');        else            $this->message('success','العضو غير نشط');        redirect('dashboard/addmembers');    }    /**     *     *     * Client     *     *     * */    public function addclient(){        $this->load->model('Client');        if ($this->input->post('add')){            $this->Client->insert();            $this->message('success','إضافة موظف');            redirect('dashboard/addclient');        }        $config=$this->pagnate('addclient',$this->Client->record_count(),50);        $data['records']=$this->Client->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['checked']=$this->Client->select_ss();        $data['title'] = 'إضافة موظف';        $data['metakeyword'] = 'إعدادات موظف';        $data['metadiscription'] = '';        $data['subview'] = 'admin/client/client';        $this->load->view('index', $data);    }    public function deleteclient($id){        $this->load->model('Client');        $this->Client->delete($id);        redirect('dashboard/addclient');    }    public function updateclient($id){        $this->load->model('Client');        if($this->input->post('update')){            $this->Client->update($id);            $this->message('success','تعديل بيانات موظف');            redirect('dashboard/addclient','refresh');        }        $data['result']=$this->Client->getById($id);        $data["links"] = $this->pagination->create_links();        $data['checked']=$this->Client->select_ss();        $data['title'] = 'تعديل بيانات موظف';        $data['metakeyword'] = 'إعدادات بيانات  موظف';        $data['metadiscription'] = '';        $data['subview'] = 'admin/client/client';        $this->load->view('index', $data);    }    public function suspendclient($id,$clas){        $this->load->model('Client');        $this->Client->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','موظف نشط');        else            $this->message('success','موظف غير نشط');        redirect('dashboard/addclient');    }    /**     *     *     * Manager_word     *     *     * */# -----------------------------------------------------------------------------------------------------------------------------------##                                              //كلمة رئيس المجلس//                                                 ## -----------------------------------------------------------------------------------------------------------------------------------#    public function addmanager_word(){        $this->load->model('Manager_word');        if ($this->input->post('add')){            $this->Manager_word->insert(1);            $this->message('success','إضافة الكلمة');            redirect('dashboard/addmanager_word');        }        $config=$this->pagnate('addmanager_word',$this->Manager_word->record_count(),50);        $data['records']=$this->Manager_word->select($config["per_page"],1);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة كلمة رئيس الجمعية';        $data['metakeyword'] = 'إعدادات كلمة رئيس الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/manager_word';        $this->load->view('index', $data);    }    public function updatemanager_word($id){        $this->load->model('Manager_word');        if($this->input->post('update')){            $this->Manager_word->update($id);            $this->message('success','تعديل كلمة رئيس الجمعية');            redirect('dashboard/addmanager_word','refresh');        }        $data['result']=$this->Manager_word->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل كلمة رئيس الجمعية';        $data['metakeyword'] = 'إعدادات كلمة رئيس الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/manager_word';        $this->load->view('index', $data);    }    /**     *     *     * Amin_word     *     *     * */    # -----------------------------------------------------------------------------------------------------------------------------------##                                              //كلمة الأمين العام//                                                 ## -----------------------------------------------------------------------------------------------------------------------------------#    public function addamin_word(){        $this->load->model('Manager_word');        if ($this->input->post('add')){            $this->Manager_word->insert(2);            $this->message('success','إضافة الكلمة');            redirect('dashboard/addamin_word');        }        $config=$this->pagnate('addamin_word',$this->Manager_word->record_count(),50);        $data['records']=$this->Manager_word->select($config["per_page"],2);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة كلمة الأمين العام';        $data['metakeyword'] = 'إعدادات كلمة الأمين العام';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/amin_word';        $this->load->view('index', $data);    }    public function updateamin_word($id){        $this->load->model('Manager_word');        if($this->input->post('update')){            $this->Manager_word->update($id);            $this->message('success','تعديل كلمة الأمين العام');            redirect('dashboard/addamin_word','refresh');        }        $data['result']=$this->Manager_word->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل كلمة الأمين العام';        $data['metakeyword'] = 'إعدادات كلمة المين العام';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/amin_word';        $this->load->view('index', $data);    }    /**     *     *     * Magles_goals     *     *     * */    public function addmagles_goals(){        $this->load->model('Manager_word');        if ($this->input->post('add')){            $this->Manager_word->insert(3);            $this->message('success','إضافة الأهداف');            redirect('dashboard/addmagles_goals');        }        $config=$this->pagnate('addmagles_goals',$this->Manager_word->record_count(),50);        $data['records']=$this->Manager_word->select($config["per_page"],3);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة أهداف الجمعية';        $data['metakeyword'] = 'إعدادات أهداف الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/magles_goals';        $this->load->view('index', $data);    }    public function updatemagles_goals($id){        $this->load->model('Manager_word');        if($this->input->post('update')){            $this->Manager_word->update($id);            $this->message('success','تعديل أهداف الجمعية');            redirect('dashboard/addmagles_goals','refresh');        }        $data['result']=$this->Manager_word->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل أهداف الجمعية';        $data['metakeyword'] = 'إعدادات أهداف الجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/magles_goals';        $this->load->view('index', $data);    }    /**     *     *     * amanet_elmagles --- رسالة الجمعية     *     *     * */    public function addamanet_elmagles(){        $this->load->model('Manager_word');        if ($this->input->post('add')){            $this->Manager_word->insert(4);            $this->message('success','إضافة النتائج المتوقعة للجمعية');            redirect('dashboard/addamanet_elmagles');        }        $config=$this->pagnate('addamanet_elmagles',$this->Manager_word->record_count(),50);        $data['records']=$this->Manager_word->select($config["per_page"],4);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة النتائج المتوقعة للجمعية';        $data['metakeyword'] = 'إعدادات النتائج المتوقعة للجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/amanet_elmagles';        $this->load->view('index', $data);    }    public function updateamanet_elmagles($id){        $this->load->model('Manager_word');        if($this->input->post('update')){            $this->Manager_word->update($id);            $this->message('success','تعديل النتائج المتوقعة للجمعية');            redirect('dashboard/addamanet_elmagles');        }        $data['result']=$this->Manager_word->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل النتائج المتوقعة للجمعية';        $data['metakeyword'] = 'إعدادات النتائج المتوقعة للجمعية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/amanet_elmagles';        $this->load->view('index', $data);    }    /**     *     *     * finance -- رؤية الجمعية     *     *     * */    public function addfinance(){        $this->load->model('Manager_word');        if ($this->input->post('add')){            $this->Manager_word->insert(5);            $this->message('success','إضافة النتائج المتوقعة للتطوع');            redirect('dashboard/addfinance');        }        $config=$this->pagnate('addfinance',$this->Manager_word->record_count(),50);        $data['records']=$this->Manager_word->select($config["per_page"],5);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة النتائج المتوقعة للتطوع';        $data['metakeyword'] = 'إعدادات النتائج المتوقعة للتطوع';        $data['metadiscription'] = '';        $data['subview'] = 'admin/finance/finance';        $this->load->view('index', $data);    }    public function updatefinance($id){        $this->load->model('Manager_word');        if($this->input->post('update')){            $this->Manager_word->update($id);            $this->message('success','تعديل النتائج المتوقعة للتطوع');            redirect('dashboard/addfinance','refresh');        }        $data['result']=$this->Manager_word->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل النتائج المتوقعة للتطوع';        $data['metakeyword'] = 'إعدادات النتائج المتوقعة للتطوع';        $data['metadiscription'] = '';        $data['subview'] = 'admin/finance/finance';        $this->load->view('index', $data);    }    /**     *     *     * Main_data     *     *     * */    public function add_main_data(){        $this->load->model('Main_data');        if ($this->input->post('add')){            $file_name='logo';            $file= $this->upload_image($file_name);            $this->Main_data->insert($file);            $this->message('success','إضافة البيانات الأساسية');            redirect('dashboard/add_main_data');        }        $config=$this->pagnate('add_main_data',$this->Main_data->record_count(),50);        $data['records']=$this->Main_data->select($config["per_page"],0);        if($this->input->post('num'))        {            if($this->input->post('num') != 0)            {                $page = $this->input->post('page');                $data['result'] = $this->input->post('num');                $this->load->view('admin/main_data/'.$page.'', $data);            }        }        else{            $data["links"] = $this->pagination->create_links();            $data['title'] = 'إضافة البيانات الأساسية';            $data['metakeyword'] = 'إعدادات البيانات الأساسية';            $data['metadiscription'] = '';            $data['subview'] = 'admin/main_data/main_data';            $this->load->view('index', $data);}    }    public function update_main_data($id){        $this->load->model('Main_data');        if($this->input->post('update')){            $file_name='logo';            $file= $this->upload_image($file_name);            $this->Main_data->update($id,$file);            $this->message('success','تعديل البيانات الأساسية');            redirect('dashboard/add_main_data','refresh');        }        $data['result']=$this->Main_data->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل البيانات الأساسية';        $data['metakeyword'] = 'إعدادات البيانات الأساسية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_data/main_data';        $this->load->view('index', $data);    }    public function delete($from,$id,$index){        $this->load->model('Main_data');        $this->Main_data->delete($from,$id,$index);        redirect('dashboard/update_main_data/'.$id.'');    }    /**     *     *     * Sayings     *     *     * */    public function add_sayings(){        $this->load->model('Sayings');        if ($this->input->post('add')){            $date = $this->Greg2Hijri();            $this->Sayings->insert($date);            $this->message('success','إضافة كلمة');            redirect('dashboard/add_sayings');        }        $config=$this->pagnate('add_sayings',$this->Sayings->record_count(),50);        $data['records']=$this->Sayings->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة كلمة';        $data['metakeyword'] = 'إعدادات كلمة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/sayings/sayings';        $this->load->view('index', $data);    }    public function delete_sayings($id){        $this->load->model('Sayings');        $this->Sayings->delete($id);        redirect('dashboard/add_sayings');    }    public function update_sayings($id){        $this->load->model('Sayings');        if($this->input->post('update')){            $date = $this->Greg2Hijri();            $this->Sayings->update($id,$date);            $this->message('success','تعديل كلمة');            redirect('dashboard/add_sayings','refresh');        }        $data['result']=$this->Sayings->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل كلمة';        $data['metakeyword'] = 'إعدادات كلمة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/sayings/sayings';        $this->load->view('index', $data);    }    public function suspend_sayings($id,$clas){        $this->load->model('Sayings');        $this->Sayings->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','كلمة نشطة');        else            $this->message('success','كلمة غير نشطة');        redirect('dashboard/add_sayings');    }    /**     *     * News     * **/    public function add_news(){        $this->load->model('News');        if ($this->input->post('add_news')){            for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)            {                $file_name='img'.$x;                $file[]= $this->upload_image($file_name);            }            $this->News->insert($file);            $this->message('success','إضافة خبر');            redirect('dashboard/add_news','refresh');        }        $data['records']=$this->News->select('');        if($data['records']){            $this->load->model('Users');            for($r = 0 ; $r < count($data['records']) ; $r++)                $data['user'][$r]=$this->Users->display($data['records'][$r]->publisher);}        if($this->input->post('num'))        {            if($this->input->post('num') != 0)            {                $data['result'] = $this->input->post('num');                $this->load->view('admin/news/photos', $data);            }        }        else{            $data['title'] = 'إضافة خبر';            $data['metakeyword'] = 'إعدادات الأخبار';            $data['metadiscription'] = '';            $data['subview'] = 'admin/news/news';            $this->load->view('index', $data);        }    }    public function delete_news($id){        $this->load->model('News');        $this->News->delete($id);        redirect('dashboard/add_news','refresh');    }    public function update_news($id){        $this->load->model('News');        if($this->input->post('update')){            if($this->input->post('photo_num'))            {                if($this->input->post('photo_num') != 0)                {                    for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                    {                        $file_name='img'.$x;                        $file[]= $this->upload_image($file_name);                    }                }            }            else                $file = '';            $this->News->update($id,$file);            $this->message('success','تعديل الخبر');            redirect('dashboard/add_news','refresh');        }        $data['result']=$this->News->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل خبر';        $data['metakeyword'] = 'إعدادات الأخبار';        $data['metadiscription'] = '';        $data['subview'] = 'admin/news/news';        $this->load->view('index', $data);    }    public function delete_photo($id,$index){        $this->load->model('News');        $this->News->delete_photo($id,$index);        redirect('dashboard/update_news/'.$id.'');    }    public function suspend_news($id,$clas){        $this->load->model('News');        $this->News->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','الخبر نشط');        else            $this->message('success','الخبر غير نشط');        redirect('dashboard/add_news');    }    /**     *     * Journalist     * **/    public function add_journalist(){        $this->load->model('Journalist');        if ($this->input->post('add_news')){            for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)            {                $file_name='img'.$x;                $file[]= $this->upload_image($file_name);            }            $file_name='logo';            $file2= $this->upload_image($file_name);            $this->Journalist->insert($file,$file2);            $this->message('success','إضافة خبر صحفي');            redirect('dashboard/add_journalist','refresh');        }        $config=$this->pagnate('add_journalist',$this->Journalist->record_count(),50);        $data['records']=$this->Journalist->select($config["per_page"]);        if($data['records']){            $this->load->model('Users');            for($r = 0 ; $r < count($data['records']) ; $r++)                $data['user'][$r]=$this->Users->display($data['records'][$r]->publisher);}        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة أخبار الملف الصحفي';        $data['metakeyword'] = 'إعدادات الأخبار الصحفية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/journalist/journalist';        $this->load->view('index', $data);    }    public function delete_journalist($id){        $this->load->model('News');        $this->News->delete($id);        redirect('dashboard/add_journalist','refresh');    }    public function suspend_journalist($id,$clas){        $this->load->model('News');        $this->News->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','الخبر نشط');        else            $this->message('success','الخبر غير نشط');        redirect('dashboard/add_journalist');    }    public function update_journalist($id){        $this->load->model('Journalist');        if($this->input->post('update')){            if($this->input->post('photo_num'))            {                if($this->input->post('photo_num') != 0)                {                    for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                    {                        $file_name='img'.$x;                        $file[]= $this->upload_image($file_name);                    }                }            }            else                $file = '';            $file_name='logo';            $file2= $this->upload_image($file_name);            $this->Journalist->update($id,$file,$file2);            $this->message('success','تعديل الخبر الصحفي');            redirect('dashboard/add_journalist','refresh');        }        $data['result']=$this->Journalist->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل خبر صحفي';        $data['metakeyword'] = 'إعدادات الأخبار الصحفية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/journalist/journalist';        $this->load->view('index', $data);    }    public function delete_photo_($id,$index){        $this->load->model('News');        $this->News->delete_photo($id,$index);        redirect('dashboard/update_journalist/'.$id.'');    }    //////////////////// contact    public function contact(){        $this->load->model('Contact');        $config=$this->pagnate('contact',$this->Contact->record_count(),10);        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;        $page = (($page*10)-10);        if($page<0)            $page = 0;        $data['records']=$this->Contact->select("","");        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إدارة الرسائل الواردة';        $data['metakeyword'] = 'الرسائل الواردة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/contact/contact';        $this->load->view('index', $data);    }    public function delete_contact($id){        $this->load->model('Contact');        $this->Contact->delete($id);        redirect('dashboard/contact','refresh');    }    public function delete_selected_contact(){        $this->load->model('Contact');        if($this->input->post('check') && $this->input->post('del')){            foreach($_POST['check'] as $checked){                $this->Contact->delete($checked);            }        }        redirect('dashboard/contact','refresh');    }    //////////////////// idea    public function idea(){        $this->load->model('Idea');        for($x = 0 ; $x < 4 ; $x++)        {            /*$config[$x]=$this->pagnate('idea',$this->Idea->record_count($x),5);            $page[$x] = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;                $page[$x] = (($page[$x]*5)-5);                if($page[$x]<0)                    $page[$x] = 0;            $data['records'.$x.'']=$this->Idea->select($config[$x]["per_page"],$page[$x],$x);            $data['links'.$x.''] = $this->pagination->create_links();*/            $data['records'.$x.'']=$this->Idea->select_without($x);        }        $data['title'] = 'إدارة الأفكار الواردة';        $data['metakeyword'] = 'الأفكار الواردة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/idea/idea';        $this->load->view('index', $data);    }    public function delete_idea($id){        $this->load->model('Idea');        $this->Idea->delete($id);        redirect('dashboard/idea','refresh');    }    public function suspend($type,$id){        $this->load->model('Idea');        $this->Idea->suspend($type,$id,$this->input->post('resons'));        redirect('dashboard/idea','refresh');    }    ////////////////////////////////// course report////////////////////////////////// sherif/////////////    ////////////////////////////////////////////////////////////    ////////////////////////////////////////////////////////////    ////////////////////////////////////////////////////////////    /////////////////////////////wefak/////////////////////////    /**     * *********************************************************************************     *     *                                 AHMAD     * **********************************************************************************     * */    ///////////////////////////////////////////////////////////////////////////reports////////////////    public function addreports(){        $this->load->model('Reports');        if ($this->input->post('add_report')){            $file_name='filee';            $file= $this->upload_file($file_name);            $this->Reports->insert($file);            $this->message('success','إضافةتقرير');            redirect('dashboard/addreports');        }        $config=$this->pagnate('addreports',$this->Reports->record_count(),50);        $data['records']=$this->Reports->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة تقرير';        $data['metakeyword'] = 'إعدادات التقارير السنوية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/reports/reports';        $this->load->view('index', $data);    }    public function deletereports($id){        $this->load->model('Reports');        $this->Reports->delete($id);        redirect('dashboard/addreports');    }    public function updatereports($id){        $this->load->model('Reports');        if($this->input->post('update_report')){            $file_name='filee';            $file= $this->upload_file($file_name);            $this->Reports->update($id,$file);            $this->message('success','تعديل التقرير بنجاح');            redirect('dashboard/addreports','refresh');        }        $data['result']=$this->Reports->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل تقرير';        $data['metakeyword'] = 'إعدادات  التقارير السنوية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/reports/reports';        $this->load->view('index', $data);    }    public function suspendreports($id,$clas){        $this->load->model('Reports');        $this->Reports->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','التقرير نشط');        else            $this->message('success','التقرير غير نشط');        redirect('dashboard/addreports');    }    ///////////////////////////////////////////////////////////////////////////slider////////////////    public function addslider(){        $this->load->model('Slider');        if ($this->input->post('add_slider')){            $file_name='img';            $file= $this->upload_image($file_name);            $this->Slider->insert($file);            $this->message('success','إضافة صور ');            redirect('dashboard/addslider');        }        $config=$this->pagnate('addslider',$this->Slider->record_count(),50);        $data['records']=$this->Slider->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة الصور الرئيسية';        $data['metakeyword'] = 'إعدادات الصور الرئيسية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/slider/slider';        $this->load->view('index', $data);    }    public function deleteslider($id){        $this->load->model('Slider');        $this->Slider->delete($id);        redirect('dashboard/addslider');    }    public function updateslider($id){        $this->load->model('Slider');        if($this->input->post('update_slider')){            $file_name='img';            $file= $this->upload_image($file_name);            $this->Slider->update($id,$file);            $this->message('success','تعديل الصور ');            redirect('dashboard/addslider','refresh');        }        $data['result']=$this->Slider->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل صورة';        $data['metakeyword'] = 'إعدادات  الصور الرئيسية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/slider/slider';        $this->load->view('index', $data);    }    ///////////////////////////////////////////////////////////////////////////slider////////////////# -----------------------------------------------------------------------------------------------------------------------------------##                                              //إعلان خارجي//                                                 ## -----------------------------------------------------------------------------------------------------------------------------------#    public function addadver(){        $this->load->model('Advertising');        if ($this->input->post('add_adver')){            $file_name='image';            $file= $this->upload_image($file_name);            $this->Advertising->insert($file);            $this->message('success','إضافة إعلان خارجي');            redirect('dashboard/addadver');        }        $config=$this->pagnate('addadver',$this->Advertising->record_count(),50);        $data['records']=$this->Advertising->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة الإعلانات الخارجية';        $data['metakeyword'] = 'إعدادات الإعلانات الخارجية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/gallery/advertising';        $this->load->view('index', $data);    }    public function deleteadver($id){        $this->load->model('Advertising');        $this->Advertising->delete($id);        redirect('dashboard/addadver');    }    public function updateadver($id){        $this->load->model('Advertising');        if($this->input->post('update_adver')){            $file_name='image';            $file= $this->upload_image($file_name);            $this->Advertising->update($id,$file);            $this->message('success','تعديل الإعلان الخارجي ');            redirect('dashboard/addadver','refresh');        }        $config=$this->pagnate('addadver',$this->Advertising->record_count(),50);        $data['records']=$this->Advertising->select($config["per_page"]);        $data['result']=$this->Advertising->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل إعلان خارجي';        $data['metakeyword'] = 'إعدادات  الإعلانات الخارجية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/gallery/advertising';        $this->load->view('index', $data);    }    ///////////////////////////////////////////////////////////////////////////album////////////////    public function add_album(){        $this->load->model('Album');        if ($this->input->post('add_album')){            for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)            {                $file_name='img'.$x;                $file[]= $this->upload_image($file_name);            }            $this->Album->insert($file);            $this->message('success','إضافة صور');            redirect('dashboard/add_album','refresh');        }        $config=$this->pagnate('add_album',$this->Album->record_count(),50);        $data['records']=$this->Album->select($config["per_page"]);        if($this->input->post('num'))        {            if($this->input->post('num') != 0)            {                $data['result'] = $this->input->post('num');                $this->load->view('admin/gallery/photos', $data);            }        }        else{            $data["links"] = $this->pagination->create_links();            $data['title'] = 'إضافة صور';            $data['metakeyword'] = 'إعدادات مكتبة الصور';            $data['metadiscription'] = '';            $data['subview'] = 'admin/gallery/album';            $this->load->view('index', $data);        }    }    public function delete_album($id){        $this->load->model('Album');        $this->Album->delete($id);        redirect('dashboard/add_album','refresh');    }    public function update_album($id){        $this->load->model('Album');        if($this->input->post('update_album')){            if($this->input->post('photo_num'))            {                if($this->input->post('photo_num') != 0)                {                    for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                    {                        $file_name='img'.$x;                        $file[]= $this->upload_image($file_name);                    }                }            }            else                $file = '';            $this->Album->update($id,$file);            $this->message('success','تعديل الصور');            redirect('dashboard/add_album','refresh');        }        $config=$this->pagnate('add_album',$this->Album->record_count(),50);        $data['records']=$this->Album->select($config["per_page"]);        $data['result']=$this->Album->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل الصور';        $data['metakeyword'] = 'إعدادات مكتبة الصور';        $data['metadiscription'] = '';        $data['subview'] = 'admin/gallery/album';        $this->load->view('index', $data);    }    public function delete_photo_album($id,$index){        $this->load->model('Album');        $this->Album->delete_photo($id,$index);        redirect('dashboard/update_album/'.$id.'');    }    public function download($file)    {        $this->load->helper('download');        $name = $file;        $data = file_get_contents('./uploads/files/'.$file);        force_download($name, $data);        //  redirect('dashboard/addreports','refresh');    }    ////////////////////////////////////    public function add_main_dep(){        $this->load->model('Main_dep');        if ($this->input->post('add_main_dep')){            $this->Main_dep->insert();            $this->message('success','إضافة مجال');            redirect('dashboard/add_main_dep');        }        $config=$this->pagnate('add_main_dep',$this->Main_dep->record_count(),50);        $data['records']=$this->Main_dep->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة مجال';        $data['metakeyword'] = 'إعدادات مجال';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_department/main_dep';        $this->load->view('index', $data);    }    //------------------   edit  ---------------------------------------    public function update_main_dep($id){        $this->load->model('Main_dep');        if($this->input->post('update_main_dep')){            $this->Main_dep->update($id);            $this->message('success','تعديل المجال');            redirect('dashboard/add_main_dep','refresh');        }        $data['result']=$this->Main_dep->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل المجال';        $data['metakeyword'] = 'إعدادات المجال';        $data['metadiscription'] = '';        $data['subview'] = 'admin/main_department/main_dep';        $this->load->view('index', $data);    }    //-------------------------------- delete ----------------------------    public function delete_dep($id){        $this->load->model('Main_dep');        $this->Main_dep->delete($id);        redirect('dashboard/add_main_dep');    }    //-------------------------------suspend ------------------------------    public function suspend_dep($id,$clas){        $this->load->model('Main_dep');        $this->Main_dep->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','مجال نشطة');        else            $this->message('success','مجال غير نشطة');        redirect('dashboard/add_main_dep');    }    /**     *   --------------------------------------------------------------------------------------------------------     *                                          18-1-2017     *                                   add defines     *  -------------------------------------------------------------------------------------------------------     */    public function add_all_defined(){        $this->load->model('All_defined');        if ($this->input->post('add_all_defined')){            $this->All_defined->insert();            $this->message('success','إضافة مقولة');            redirect('dashboard/add_all_defined');        }        //var_dump($this->All_defined->record_count2());        //  die;        $data['array_tables']=$this->All_defined->record_count2();        $config=$this->pagnate('add_all_defined',$this->All_defined->record_count(),100);        $data['records']=$this->All_defined->select($config["per_page"]);        $data["links"] = $this->pagination->create_links();        //$date["r"]=$this->All_defined->select(3);        $data['title']  = 'إضافة تعريف بالقوائم المسندلة';        $data['metakeyword'] = 'إعدادات  تعريف بالقوائم المسندل';        $data['metadiscription'] = '';        $data['subview'] = 'admin/defined/all_defined';        $this->load->view('index', $data);    }    //------------------   edit  ---------------------------------------    public function update_all_defined($id){        $this->load->model('All_defined');        if($this->input->post('update_All_defined')){            $this->All_defined->update($id);            $this->message('success','تعديل المجال');            redirect('dashboard/add_all_defined','refresh');        }        $data['result']=$this->All_defined->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل التعريف';        $data['metakeyword'] = 'إعدادات التعريف';        $data['metadiscription'] = '';        $data['subview'] = 'admin/defined/all_defined';        $this->load->view('index', $data);    }    //-------------------------------- delete ----------------------------    public function delete_all_defined($id){        $this->load->model('All_defined');        $this->All_defined->delete($id);        redirect('dashboard/add_all_defined');    }    /**     *   --------------------------------------------------------------------------------------------------------     *                                          18-1-2017     *                                   APP     *  -------------------------------------------------------------------------------------------------------     */    //------------------- delete  -------------------------    public function deleteApp($id){        $this->load->model('App');        $this->App->delete($id);        redirect('dashboard/addApp');    }//------------------- suspend -------------------------    public function suspendApp($id,$clas){        $this->load->model('App');        $this->App->suspend($id,$clas);        if($clas == 'danger')            $this->message('success',' الاستمارة نشط');        else            $this->message('success','الاستمارة غير نشط');        redirect('dashboard/addApp');    }//------------------- add -------------------------    public function addApp(){        $this->load->model('App');        $data['gender'] =$this->App->get_all_define(1);        $data['learn'] =$this->App->get_all_define(2);        $data['status'] =$this->App->get_all_define(3);        $data['blood'] =$this->App->get_all_define(6);        $data_load['work'] =$this->App->get_all_define(4);        $data_load2['place_work'] =$this->App->get_all_define(5);        $data_load3['desiss'] =$this->App->get_all_define(7);        $data['nationalty'] =$this->App->get_all_define(8);        $data['city'] =$this->App->get_all_define(9);        $data["all_dep"]=$this->App->get_all_departments();        if ($this->input->post('add_registration')){            $file_name='cv';            $file= $this->upload_file($file_name);            $date = $this->Greg2Hijri();            $this->App->insert($file,$date,$_SESSION['user_id']);            $this->message('success','إضافة استمارة تسجيل');            redirect('dashboard/addApp');        }elseif($this->input->post('num')){            // redio button            $this->load->view('admin/x/x',$data_load);        }elseif($this->input->post('keta3')!=''){            // subload            $data_load2["type_work"]=$this->App->get_work_type($this->input->post('keta3'));            $this->load->view('admin/x/d',$data_load2);        }elseif($this->input->post('sick') != ""){            $this->load->view('admin/x/s',$data_load3);        }else{            $config=$this->pagnate('addreports',$this->App->record_count(),50);            $data['records']=$this->App->select($config["per_page"]);            $data["links"] = $this->pagination->create_links();            $data['title'] = 'إستمارة تسجيل';            $data['metakeyword'] = 'إعدادات البريد الاليكترونى ';            $data['metadiscription'] = '';            $data['subview'] = 'admin/app/app';            $this->load->view('index',$data);        }    }    /*    public function addApp(){       $this->load->model('App');           $data['gender'] =$this->App->get_all_define(1);           $data['learn'] =$this->App->get_all_define(2);           $data['status'] =$this->App->get_all_define(3);           $data['blood'] =$this->App->get_all_define(6);           $data_load['work'] =$this->App->get_all_define(4);           $data_load2['place_work'] =$this->App->get_all_define(5);           $data_load3['desiss'] =$this->App->get_all_define(7);           $data["all_dep"]=$this->App->get_all_departments();      if ($this->input->post('add_registration')){                   $file_name='cv';                $file= $this->upload_file($file_name);                $date = $this->Greg2Hijri();                $this->App->insert($file,$date);                $this->message('success','إضافة استمارة تسجيل');                redirect('dashboard/addApp');                }elseif($this->input->post('num')){        // redio button       $this->load->view('admin/x/x',$data_load);    }elseif($this->input->post('keta3')!=''){        // subload         $data_load2["type_work"]=$this->App->get_work_type($this->input->post('keta3'));         $this->load->view('admin/x/d',$data_load2);    }elseif($this->input->post('sick') != ""){         $this->load->view('admin/x/s',$data_load3);    }else{             $config=$this->pagnate('addreports',$this->App->record_count(),50);            $data['records']=$this->App->select($config["per_page"]);            $data["links"] = $this->pagination->create_links();        $data['title'] = 'إستمارة تسجيل';        $data['metakeyword'] = 'إعدادات البريد الاليكترونى ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/app/app';        $this->load->view('index',$data);    }    }*///------------------- update -------------------------    /*          public function updateApp($id){          $this->load->model('App');         $data['gender'] =$this->App->get_all_define(1);         $data['learn'] =$this->App->get_all_define(2);         $data['status'] =$this->App->get_all_define(3);         $data['blood'] =$this->App->get_all_define(6);         $data['work'] =$this->App->get_all_define(4);         $data['place_work'] =$this->App->get_all_define(5);         $data['desiss'] =$this->App->get_all_define(7);         $data["all_dep"]=$this->App->get_all_departments();         $data_load['work'] =$this->App->get_all_define(4);         $data_load2['place_work'] =$this->App->get_all_define(5);         $data_load3['desiss'] =$this->App->get_all_define(7);          if($this->input->post('updateApp')){            $file_name='cv';            $file= $this->upload_file($file_name);            $date = $this->Greg2Hijri();            $this->App->update($id,$file,$date);            $this->message('success','تعديل التقرير بنجاح');              redirect('dashboard/addApp','refresh');          }           if($this->input->post('num')){           // redio button          $this->load->view('admin/x/x',$data_load);          }elseif($this->input->post('keta3')!=''){          // subload          $data_load2["type_work"]=$this->App->get_work_type($this->input->post('keta3'));          $this->load->view('admin/x/d',$data_load2);          }elseif($this->input->post('sick')== 1){          $this->load->view('admin/x/s',$data_load3);          }          $data['result']=$this->App->getById($id);          $data["links"] = $this->pagination->create_links();          $data['title'] = 'تعديل تقرير';          $data['metakeyword'] = 'إعدادات  التقارير السنوية';          $data['metadiscription'] = '';          $data['subview'] = 'admin/app/app';          $this->load->view('index', $data);      }      */    public function updateApp($id){        $this->load->model('App');        $data['gender'] =$this->App->get_all_define(1);        $data['learn'] =$this->App->get_all_define(2);        $data['status'] =$this->App->get_all_define(3);        $data['blood'] =$this->App->get_all_define(6);        $data['work'] =$this->App->get_all_define(4);        $data['place_work'] =$this->App->get_all_define(5);        $data['desiss'] =$this->App->get_all_define(7);        $data["all_dep"]=$this->App->get_all_departments();        $data['nationalty'] =$this->App->get_all_define(8);        $data['city'] =$this->App->get_all_define(9);        $data_load['work'] =$this->App->get_all_define(4);        $data_load2['place_work'] =$this->App->get_all_define(5);        $data_load3['desiss'] =$this->App->get_all_define(7);        if($this->input->post('updateApp')){            $file_name='cv';            $file= $this->upload_file($file_name);            $date = $this->Greg2Hijri();            $this->App->update($id,$file,$date);            $this->message('success','تعديل التقرير بنجاح');            redirect('dashboard/addApp','refresh');        }        if($this->input->post('num')){            // redio button            $this->load->view('admin/x/x',$data_load);        }elseif($this->input->post('keta3')!=''){            // subload            $data_load2["type_work"]=$this->App->get_work_type($this->input->post('keta3'));            $this->load->view('admin/x/d',$data_load2);        }elseif($this->input->post('sick')== 1){            $this->load->view('admin/x/s',$data_load3);        }        $data['result']=$this->App->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل تقرير';        $data['metakeyword'] = 'إعدادات  التقارير السنوية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/app/app';        $this->load->view('index', $data);    }    //*****************************************************************************************//    /**     * ================================================================================================     *                           AHMED ABDEL GAFAR     *     * =================================================================================================     */    /* public function add_work(){        $this->load->model('Work');        $data['fields']=$this->Work->select_field();        if ($this->input->post('add_work')){            for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)            {                $file_name='img'.$x;                $file[]= $this->upload_image($file_name);            }            $this->Work->insert();            $last =$this->Work->select_last();            $this->Work->insert_album($file,$last[0]->id);            $this->message('success','إضافة عمل');            redirect('dashboard/add_work','refresh');        }        $config=$this->pagnate('add_work',$this->Work->record_count(),50);        $data['records']=$this->Work->select($config["per_page"]);            $data['resulto']=$this->Work->getname();            $data['images']=$this->Work->getdetails();        if($this->input->post('num'))        {            if($this->input->post('num') != 0)            {                $data['result'] = $this->input->post('num');                $this->load->view('admin/works/photos', $data);            }        }        else{        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة عمل';        $data['metakeyword'] = 'إعدادات الإعمال الخيرية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/works/work';        $this->load->view('index', $data);        }    }    public function delete_work($id){        $this->load->model('Work');        $this->Work->delete($id);        redirect('dashboard/add_work','refresh');    }  public function update_work($id){     $this->load->model('Work');     if($this->input->post('update_work')){           if($this->input->post('photo_num'))            {                if($this->input->post('photo_num') != 0)                {                    for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                    {                        $file_name='img'.$x;                        $file[]= $this->upload_image($file_name);                    }                }            }            else                $file = '';            $this->Work->update($id,$file);            $this->message('success','تعديل عمل');            redirect('dashboard/add_work','refresh');      }        $data['result']=$this->Work->getById($id);         $data['res']=$this->Work->getimg($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل عمل';        $data['metakeyword'] = 'إعدادات  الأعمال الخيرية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/works/work';        $this->load->view('index', $data);    }    public function delete_photo_work($id,$all_id){        $this->load->model('Work');        $this->Work->delete_photo($id,$index);        redirect('dashboard/update_work/'.$all_id.'');    }        public function suspend_work($id,$clas){        $this->load->model('Work');            $this->Work->suspend($id,$clas);            if($clas == 'danger')            $this->message('success','العمل نشط');            else            $this->message('success','العمل غير نشط');            redirect('dashboard/add_work');    }*/    /**     * =============================================================================================================     *                 19-1-2017     *     * ==============================================================================================================     */    public function add_team(){        $this->load->model('App');        $data['gender']=$this->App->get_all_define(1);        $this->load->model('Add_team');        $data["all_vounters"]=$this->Add_team->all_subs();        $data['team_manes']=$this->Add_team->data_vounter_other();        $data['user_manes']=$this->Add_team->data_users();        $data['vounter_one']=$this->Add_team->data_vounter_one();        /* var_dump($data["all_vounters"]);        die;*/        if ($this->input->post('add_team')){            $this->Add_team->insert();            $this->message('success','إضافة عضو');            redirect('dashboard/add_team');        }        $data['gender_name']=$this->Add_team->get_gender_name();        $data['records']=$this->Add_team->select($_SESSION['vounter_id']);        $data['title']  = 'إضافة أعضاء الفريق';        $data['metakeyword'] = 'إعدادات الفريق';        $data['metadiscription'] = '';        $data['subview'] = 'admin/add_team/add_team';        $this->load->view('index', $data);    }    //------------------   edit  ---------------------------------------    public function update_team($id){        $this->load->model('Add_team');        $this->load->model('App');        $data['gender']=$this->App->get_all_define(1);        if($this->input->post('update_team')){            $this->Add_team->update($id);            $this->message('success','تعديل المجال');            redirect('dashboard/add_team','refresh');        }        $data['result']=$this->Add_team->getById($id);        $data['title'] = 'تعديل  بيانات العضو';        $data['metakeyword'] = 'إعدادات الفريق';        $data['metadiscription'] = '';        $data['subview'] = 'admin/add_team/add_team';        $this->load->view('index', $data);    }    //-------------------------------- delete ----------------------------    public function delete_team_member($id){        $this->load->model('Add_team');        $this->Add_team->delete($id);        redirect('dashboard/add_team');    }    /**     *     * -------------------------------  23-1-2017b  ---------------------------     *     *     *     * */    public function add_work(){        $this->load->model('Work');        $data['fields']=$this->Work->select_field();        if ($this->input->post('add_work')){            for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)            {                $file_name='img'.$x;                $file[]= $this->upload_image($file_name);            }            $date = $this->Greg2Hijri();            $this->Work->insert($date);            $last =$this->Work->select_last();            $this->Work->insert_album($file,$last[0]->id);            $this->message('success','إضافة عمل');            redirect('dashboard/add_work','refresh');        }        $config=$this->pagnate('add_work',$this->Work->record_count(),50,3);        $data['records']=$this->Work->select($config["per_page"]);        $data['resulto']=$this->Work->getname();        $data['images']=$this->Work->getdetails();        if($this->input->post('num'))        {            if($this->input->post('num') != 0)            {                $data['result'] = $this->input->post('num');                $this->load->view('admin/works/photos', $data);            }        }        else{            $data["links"] = $this->pagination->create_links();            $data['title'] = 'إضافة عمل';            $data['metakeyword'] = 'إعدادات الإعمال الخيرية';            $data['metadiscription'] = '';            $data['subview'] = 'admin/works/work';            $this->load->view('index', $data);        }    }    public function delete_work($id,$page){        $this->load->model('Work');        $this->Work->delete($id);        redirect('dashboard/'.$page,'refresh');    }    public function update_work($id){        // var_dump($id);        //die;        $this->load->model('Work');        $data['fields']=$this->Work->select_field();        if($this->input->post('update_work')){            if($this->input->post('photo_num'))            {                if($this->input->post('photo_num') != 0)                {                    for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                    {                        $file_name='img'.$x;                        $file[]= $this->upload_image($file_name);                    }                }            }            else {$file = '';}            $date = $this->Greg2Hijri();            $this->Work->update($id,$file,$date);            $this->message('success','تعديل عمل');            //die;            redirect('dashboard/add_work','refresh');        }        $data['result']=$this->Work->getById($id);        //  var_dump($data['result']);        // die;        $data['res']=$this->Work->getimg($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل عمل';        $data['metakeyword'] = 'إعدادات  الأعمال الخيرية';        $data['metadiscription'] = '';        $data['subview'] = 'admin/works/work';        $this->load->view('index', $data);    }    public function delete_photo_work($id,$all_id){        $this->load->model('Work');        $this->Work->delete_photo($id,$index);        redirect('dashboard/update_work/'.$all_id.'');    }    public function suspend_work($id,$clas){        $this->load->model('Work');        $this->Work->suspend($id,$clas);        if($clas == 'danger')            $this->message('success','العمل نشط');        else            $this->message('success','العمل غير نشط');        redirect('dashboard/add_work');    }    //********************************************************************************************************    public function work_approved(){        $this->load->model('Approve_works');        $this->load->model('Work');        $data['dep_name']=$this->Work->getname();        $data['work_not_action']=$this->Approve_works->select_without(0);        $data['work_active']=$this->Approve_works->select_without(1);        $data['work_not_active']=$this->Approve_works->select_without(2);        $data['works']=$this->Approve_works->select_without(3);        $data['title'] = 'إدارة الأعمال التطوعية ';        $data['metakeyword'] = 'الأعمال الواردة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/approve_works/approve_works';        $this->load->view('index', $data);    }    //---------------------------    public function suspend_work_app($type,$id){        $this->load->model('Approve_works');        $this->Approve_works->suspend($type,$id,$this->input->post('resons'));        redirect('dashboard/work_approved','refresh');    }    //*************************************************************************************************************//    //****************************** 22 - 1-2017    public function add_gehat_da3ma(){        $this->load->model('Gehat_da3ma');        if ($this->input->post('add_gehat_da3ma')){            $file_name='img';            $file= $this->upload_image($file_name);            $this->Gehat_da3ma->insert($file);            $this->message('success','إضافة اللوجو ');            redirect('dashboard/add_gehat_da3ma');        }        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;        $page = (($page*10)-10);        if($page<0)            $page = 0;        $config=$this->pagnate('add_gehat_da3ma',$this->Gehat_da3ma->record_count(),10,3);        $data['records']=$this->Gehat_da3ma->select($config["per_page"],$page);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'إضافة الجهة الداعمة';        $data['metakeyword'] = 'إعدادات الجهة الدعامة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/gehat_da3ma/gehat_da3ma';        $this->load->view('index', $data);    }    public function delete_gehat_da3ma($id){        $this->load->model('Gehat_da3ma');        $this->Gehat_da3ma->delete($id);        redirect('dashboard/add_gehat_da3ma');    }    public function update_gehat_da3ma($id){        $this->load->model('Gehat_da3ma');        if($this->input->post('update_gehat_da3ma')){            $file_name='img';            $file= $this->upload_image($file_name);            $this->Gehat_da3ma->update($id,$file);            $this->message('success','تعديل  ');            redirect('dashboard/add_gehat_da3ma','refresh');        }        $data['result']=$this->Gehat_da3ma->getById($id);        $data["links"] = $this->pagination->create_links();        $data['title'] = 'تعديل ';        $data['metakeyword'] = 'إعدادات  الجهة الداعمة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/gehat_da3ma/gehat_da3ma';        $this->load->view('index', $data);    }    //***********************************************************************************************    //**********************       32-1-2017     *************************************************************************    public function R_approved(){        $this->load->model('Approve_works');        $data['approved']=$this->Approve_works->select_refuse();        $data['result_name']=$this->Approve_works->getname();        $data['title'] = 'التقارير';        $data['metakeyword'] = '';        $data['metadiscription'] = '';        $data['subview'] = 'admin/approve_works/R_approved_refuse';        $this->load->view('index', $data);    }    /* public function R_work(){          $this->load->model('Approve_works');           $this->load->model('Work');         $data['read_liberary']=$this->Work->select_limit("",1,'',"");         $data['vedio_liberary']=$this->Work->select_limit("",2,'',"");         $data['dep_name']=$this->Work->getname();         $data['result_name']=$this->Approve_works->getname();         $data['title'] = 'التقارير';         $data['metakeyword'] = '';         $data['metadiscription'] = '';         $data['subview'] = 'admin/works/R_works';         $this->load->view('index', $data);     }*/    public function R_work(){        $this->load->model('Approve_works');        $this->load->model('Work');        $data['read_liberary']=$this->Approve_works->select_type(1,$_SESSION['vounter_id']);        $data['vedio_liberary']=$this->Approve_works->select_type(2,$_SESSION['vounter_id']);        $data['dep_name']=$this->Work->getname();        $data['result_name']=$this->Approve_works->getname();        $data['title'] = 'التقارير';        $data['metakeyword'] = '';        $data['metadiscription'] = '';        $data['subview'] = 'admin/works/R_works';        $this->load->view('index', $data);    }//*****************************************************************************************************************    public function R_ideas(){        $this->load->model('Idea');        $data['query']=$this->Idea->select_idea();        $data['comment']=$this->Idea->get_comment();        $data['title'] = 'إدارة الأفكار التطوعية';        $data['metakeyword'] = '';        $data['metadiscription'] = '';        $data['subview'] = 'admin/idea/R_accepted_ideas';        $this->load->view('index', $data);    }    public function delete_comment($id){        $this->load->model('Idea');        $this->Idea->delete_comments($id);        redirect('dashboard/R_ideas');    }    public function suspend_idea($type,$id){        $this->load->model('Idea');        $this->Idea->suspend_app($type,$id);        redirect('dashboard/R_ideas','refresh');    }    ///////////////////////    public function delete_idea_app($id){        $this->load->model('Idea');        $this->Idea->delete_idea($id);        redirect('dashboard/R_ideas','refresh');    }    public function app_approved(){        $this->load->model('Approved_app');        $this->load->model('Work');        $this->load->model('All_defined');        // var_dump($this->All_defined->select(""));        $data['sitting']=$this->All_defined->select("");        $data['dep_name']=$this->Work->getname();        $data['app_not_action']=$this->Approved_app->select_without(0);        // var_dump( $data['dep_name']);        //die;        $data['app_active']=$this->Approved_app->select_without(1);        $data['app_not_active']=$this->Approved_app->select_without(2);        $data['apps']=$this->Approved_app->select_without(3);        $data['title'] = 'إدارة المتطوعين ';        $data['metakeyword'] = 'الطلبات';        $data['metadiscription'] = '';        $data['subview'] = 'admin/app/approved_app';        $this->load->view('index', $data);    }//----------------------------------- delete    public function delete_app_inApproved($id){        $this->load->model('App');        $this->App->delete($id);        redirect('dashboard/app_approved','refresh');    }// ----------------------- ---------- suspend    public function suspend_app_approved($type,$id){        $this->load->model('Approved_app');        $this->Approved_app->suspend($type,$id,$this->input->post('resons'));        redirect('dashboard/app_approved','refresh');    }    public function admin_add_team(){        $this->load->model('App');        $data['gender']=$this->App->get_all_define(1);        $this->load->model('Add_team');        $data["all_vounters"]=$this->Add_team->all_subs();        $data['team_manes']=$this->Add_team->data_vounter_other();        $data['user_manes']=$this->Add_team->data_users();        $data['vounter_one']=$this->Add_team->data_vounter_one();        // var_dump( $data["all_vounters"]);        // die;        if ($this->input->post('add_team')){            $this->Add_team->insert();            $this->message('success','إضافة عضو');            redirect('dashboard/admin_add_team');        }        $data['gender_name']=$this->Add_team->get_gender_name();        $data['records']=$this->Add_team->select($_SESSION['vounter_id']);        $data['title']  = 'إضافة أعضاء الفريق';        $data['metakeyword'] = 'إعدادات الفريق';        $data['metadiscription'] = '';        $data['subview'] = 'admin/add_team/admin_add_team';        $this->load->view('index', $data);    }    //------------------   edit  ---------------------------------------    public function admin_update_team($id){        $this->load->model('Add_team');        $this->load->model('App');        $data["all_vounters"]=$this->Add_team->all_subs();        $data['team_manes']=$this->Add_team->data_vounter_other();        $data['user_manes']=$this->Add_team->data_users();        $data['vounter_one']=$this->Add_team->data_vounter_one();        $data['gender']=$this->App->get_all_define(1);        if($this->input->post('update_team')){            $this->Add_team->update($id);            $this->message('success','تعديل المجال');            redirect('dashboard/admin_add_team','refresh');        }        $data['result']=$this->Add_team->getById($id);        $data['title'] = 'تعديل  بيانات العضو';        $data['metakeyword'] = 'إعدادات الفريق';        $data['metadiscription'] = '';        $data['subview'] = 'admin/add_team/admin_add_team';        $this->load->view('index', $data);    }    //-------------------------------- delete ----------------------------    public function admin_delete_team_member($id){        $this->load->model('Add_team');        $this->Add_team->delete($id);        redirect('dashboard/admin_add_team');    }    public function add_sites(){        $this->load->model('Sites');        if ($this->input->post('add_about')){            $this->Sites->insert();            $this->message('success','إضافة مواقع تهمك');            redirect('dashboard/add_sites','refresh');        }        $data['records']=$this->Sites->select('');        $data['title'] = 'إضافة مواقع تهمك';        $data['metakeyword'] = 'إعدادات مواقع تهمك';        $data['metadiscription'] = '';        $data['subview'] = 'admin/sites/sites';        $this->load->view('index', $data);    }    public function delete_sites($id){        $this->load->model('Sites');        $this->Sites->delete($id);        redirect('dashboard/add_sites');    }    public function update_sites($id){        $this->load->model('Sites');        if($this->input->post('update')){            $this->Sites->update($id);            $this->message('success','تعديل مواقع تهمك');            redirect('dashboard/add_sites','refresh');        }        $data['result']=$this->Sites->getById($id);        $data['title'] = 'تعديل مواقع تهمك';        $data['metakeyword'] = 'إعدادات مواقع تهمك';        $data['metadiscription'] = '';        $data['subview'] = 'admin/sites/sites';        $this->load->view('index', $data);    }    public function dash_reports($type){        if($type ==1){            $this->load->model('Users');            $data['users']=$this->Users->select();            $data['title'] = 'مجموعة الامستخدمين';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/user_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==2){            $this->load->model('Members');            $data['members']=$this->Members->select(10000);            $data['title'] = 'مجموعة الأعضاء';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/members_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==3){            $this->load->model('News');            $data['records']=$this->News->select(10000);            $data['title'] = 'مجموعة الأخبار';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/new_reportes';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==4){            $this->load->model('Journalist');            $data['records']=$this->Journalist->select(10000);            $data['title'] = 'مجموعة أخبار الصحافة';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/journalist_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==5){            $this->load->model('Reports');            $data['records']=$this->Reports->select(10000);            $data['title'] = 'مجموعة التقارير';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/year_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==7){            $this->load->model('Add_team');            $data["all_vounters"]=$this->Add_team->all_subs();            $data['team_manes']=$this->Add_team->data_vounter_other();            $data['user_manes']=$this->Add_team->data_users();            $data['vounter_one']=$this->Add_team->data_vounter_one();            $data['title'] = 'مجموعة المتطوعين';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/volunteer_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==8){            $this->load->model('Add_team');            $data["all_vounters"]=$this->Add_team->all_subs();            $data['team_manes']=$this->Add_team->data_vounter_other();            $data['user_manes']=$this->Add_team->data_users();            $data['vounter_one']=$this->Add_team->data_vounter_one();            $data['title'] = 'مجموعة فرق التطوع';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/volunteer_team_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==9){            $this->load->model('Approve_works');            $data['records']=$this->Approve_works->select_without(1);            $data['title'] = 'مجموعة الأعمال التطوعية';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/works_reports';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==10){            $this->load->model('Approve_works');            $this->load->model('Work');            $data['vedio_liberary']=$this->Work->select_limit("",2,'',"");            $data['dep_name']=$this->Work->getname();            $data['result_name']=$this->Approve_works->getname();            $data['title'] = 'المكتبة المرئية';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/vedio_report';            $this->load->view('index', $data);            ///////////////////////////////////        }        elseif($type ==11){            $this->load->model('Approve_works');            $this->load->model('Work');            $data['read_liberary']=$this->Work->select_limit("",1,'',"");            $data['dep_name']=$this->Work->getname();            $data['result_name']=$this->Approve_works->getname();            $data['title'] = 'المكتبة المكتوبة';            $data['metakeyword'] = '';            $data['metadiscription'] = '';            $data['subview'] = 'admin/dash_report/read_report';            $this->load->view('index', $data);            ///////////////////////////////////        }//end if    }    ///////////////////////////////////////////////    public function add_patient_reserve($id){        $this->load->model('Person');        $this->load->model('Main_data');        $data['debaga']=$this->Main_data->select_data();        $data['record']=$this->Person->getById($id);        $data['day_date']=$this->Greg2Hijri();        $data['place'] = $this->Person->get_define2(7);        //var_dump($data['day_date']);        $data['title'] = 'طباعة تقرير عادي.';        $data['metakeyword'] = 'طباعة تقرير عادي ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/debaga/debaga';        $this->load->view('index', $data);    }    public function add_diagnosis($id){        $this->load->model('Person');        $this->load->model('Main_data');        $data['debaga']=$this->Main_data->select_data();        $data['day_date']=$this->Greg2Hijri();        $data['place'] = $this->Person->get_define2(7);        $data['record']=$this->Person->getById($id);        $data['title'] = 'طباعة تقرير مسجد.';        $data['metakeyword'] = 'طباعة تقرير مسجد ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/debaga/debaga2';        $this->load->view('index', $data);    }    public function add_person()    {                        $this->load->model('Person');        if($this->input->post('add_person')){            $file_name='orphan_prove';            $file= $this->upload_image($file_name);            $date = $this->Greg2Hijri();            $this->Person->insert($file,$date);            $this->message('success','تم الحفظ');            redirect('dashboard/add_person','refresh');        }        if($this->input->post('social'))        {            $data = '';            if($this->input->post('social') == 16)                $this->load->view('admin/person/social',$data);        }        elseif($this->input->post('valu'))        {            $data = '';            if($this->input->post('valu') == 7)                $this->load->view('admin/person/rent',$data);        }        elseif($this->input->post('num'))        {            $data = '';            if($this->input->post('num') != 0)                $this->load->view('admin/person/table',$data);        }        else        {            $data['recordss'] = $this->Person->select();            $data['records'] = $data['recordss'][0];            $data['papers'] = $data['recordss'][1];            $data['health_state'] = $this->Person->get_define(3);            $data['house_type'] = $this->Person->get_define(1);            $data['house_state'] = $this->Person->get_define(2);            $data['social_status'] = $this->Person->get_define(4);            $data['place'] = $this->Person->get_define2(7);            $data['benefit'] = $this->Person->get_define2(8);            $data['title'] = 'إضافة  إستمارة طلب مساعدة';            $data['metakeyword'] = 'إضافة بيانات';            $data['metadiscription'] = '';            $data['subview'] = 'admin/person/person';            $this->load->view('index', $data);        }    }    public function update_person($id)    {        $this->load->model('Person');        if($this->input->post('update_person')){            $file_name='orphan_prove';            $file= $this->upload_image($file_name);            $this->Person->update($id,$file);            $this->message('success','تم التعديل');            redirect('dashboard/add_person','refresh');        }        if($this->input->post('social'))        {            $data = '';            if($this->input->post('social') == 16)                $this->load->view('admin/person/social',$data);        }        elseif($this->input->post('valu'))        {            $data = '';            if($this->input->post('valu') == 7)                $this->load->view('admin/person/rent',$data);        }        elseif($this->input->post('num'))        {            $data = '';            if($this->input->post('num') != 0)                $this->load->view('admin/person/table',$data);        }        else        {            $data['result'] = $this->Person->getById($id);            $data['result1'] = $data['result'][0];            $data['result2'] = $data['result'][1];            $data['result3'] = $data['result'][2];            $data['health_state'] = $this->Person->get_define(3);            $data['house_type'] = $this->Person->get_define(1);            $data['house_state'] = $this->Person->get_define(2);            $data['social_status'] = $this->Person->get_define(4);            $data['place'] = $this->Person->get_define(7);            $data['benefit'] = $this->Person->get_define2(8);            $data['title'] = 'تعديل تعريف عن طالب المساعدة';            $data['metakeyword'] = 'تعديل بيانات';            $data['metadiscription'] = '';            $data['subview'] = 'admin/person/person';            $this->load->view('index', $data);        }    }    public function delete_person($id){        $this->load->model('Person');        $this->Person->delete($id);        redirect('dashboard/add_person');    }    public function add_paper($id)    {        $this->load->model('Person');        $file_name1 = 'report1'.$id;        $file_name2 = 'report2'.$id;        $file1 = $this->upload_image($file_name1);        $file2 = $this->upload_image($file_name2);        $this->Person->paper($id,$file1,$file2);        redirect('dashboard/add_person');    }    public function request(){        $this->load->model('Person');        $data['records']=$this->Person->select_request(0);        $data['records2']=$this->Person->select_request(1);        $data['records3']=$this->Person->select_request(2);        $data['health_state'] = $this->Person->get_define(3);        $data['house_type'] = $this->Person->get_define(1);        $data['house_state'] = $this->Person->get_define(2);        $data['social_status'] = $this->Person->get_define(4);        $data['place'] = $this->Person->get_define2(7);        $data['benefit'] = $this->Person->get_define2(8);        $data['title'] = 'طلبات المساعدة الواردة';        $data['metakeyword'] = 'الطلبات الواردة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/person/approve';        $this->load->view('index', $data);    }    public function approved_request($type,$id){        $this->load->model('Person');        $data['records']=$this->Person->approved_request($type,$id);        $data['title'] = 'طلبات المساعدة الواردة ';        $data['metakeyword'] = 'الطلبات الواردة';        $data['metadiscription'] = '';        redirect('dashboard/request','refresh');    }    /********************/    public function search_form($id){        $this->load->model('Researcher');        $this->load->model('Person');        $data['result22']=$this->Researcher->select2();        $data['result2'] = $data['result22'][0];        $data['result3'] = $data['result22'][1];        if($this->input->post('add')){            if(isset($data['result3'][$this->uri->segment(3)]) && $data['result3'][$this->uri->segment(3)] != null){                $this->Researcher->update($data['result3'][$id]->id,$id);            }            else            {                $this->Researcher->insert($id);            }            $this->message('success','تم الحفظ');            //redirect('dashboard/researcher','refresh');            redirect('dashboard/openion/'.$this->uri->segment(3).'','refresh');        }        $data['all_defines']=$this->Researcher->select_defines();        $data['title']='نموذج بحث اجتماعى ميدانى';        $data['result']=$this->Researcher->get_person($id);        $data['propety'] = $this->Researcher->get_define(5);        $data['living_type'] = $this->Researcher->get_define(6);        $data['place'] = $this->Person->get_define2(7);        $data['metakeyword'] = 'إضافة بيانات';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search_form/search_form';        $this->load->view('index', $data);    }    public function researcher(){        $this->load->model('Researcher');        $this->load->model('Person');        $data['title']='إضافة رأي الباحث';        $data['records'] = $this->Researcher->select();        $data['result22']=$this->Researcher->select2();        $data['place'] = $this->Person->get_define2(7);        $data['result2'] = $data['result22'][1];        $data['metakeyword'] = 'إضافة رأي الباحث';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search_form/researcher';        $this->load->view('index', $data);    }    public function request_print($id){        $this->load->model('Person');        $this->load->model('Main_data');        $data['social_status'] = $this->Person->get_define(4);        $data['house_type'] = $this->Person->get_define(1);        $data['house_state'] = $this->Person->get_define(2);        $data['health_state'] = $this->Person->get_define(3);        $data['place'] = $this->Person->get_define2(7);        $data['debaga']=$this->Main_data->select_data();        $data['day_date']=$this->Greg2Hijri();        $data['result'] = $this->Person->getById($id);        $data['result3'] = $data['result'][2];        $data['record']=$this->Person->getById($id);        $data['title'] = 'طباعة إستمارة طلب مساعدة.';        $data['metakeyword'] = 'طباعة إستمارة طلب مساعدة ';        $data['metadiscription'] = '';        $data['subview'] = 'admin/debaga/request';        $this->load->view('index', $data);    }    public function openion($id){        $this->load->model('Researcher');        $this->load->model('Main_data');        $this->load->model('Person');        $this->load->model('Committee');        $this->load->model('Members');        $this->load->model('Client');        $data['client'] = $this->Client->select2();        $data['debaga']=$this->Main_data->select_data();        $data['day_date']=$this->Greg2Hijri();        $data['result22']=$this->Researcher->select2();        $data['result2'] = $data['result22'][0];        $data['result3'] = $data['result22'][1];        $data['result2']=$this->Committee->select2();        $data['result4'] = $data['result2'][0];        $data['result5'] = $data['result2'][1];        $data['member']=$this->Members->select2();        $data['all_defines']=$this->Researcher->select_defines();        $data['result']=$this->Researcher->get_person($id);        $data['propety'] = $this->Researcher->get_define(5);        $data['house_type'] = $this->Researcher->get_define(1);        $data['house_state'] = $this->Researcher->get_define(2);        $data['social_status'] = $this->Researcher->get_define(4);        $data['living_type'] = $this->Researcher->get_define(6);        $data['place'] = $this->Person->get_define2(7);        $data['metakeyword'] = 'نموذج بحث اجتماعى ميدانى';        $data['title']='نموذج بحث اجتماعى ميدانى';        $data['metadiscription'] = '';        $data['subview'] = 'admin/debaga/openion';        $this->load->view('index', $data);    }    public function magles($id){        $this->load->model('Main_data');        $data['debaga']=$this->Main_data->select_data();        $data['day_date']=$this->Greg2Hijri();        $data['title']='نتيجة البحث وقرار مجلس الإدارة';        $data['metakeyword'] = 'نتيجة البحث وقرار مجلس الإدارة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/debaga/magles';        $this->load->view('index', $data);    }    public function Committee(){        $this->load->model('Committee');        $this->load->model('Person');        $data['title']='إضافة رأي اللجنة';        $data['records'] = $this->Committee->select4();        $data['result22']=$this->Committee->select2();        $data['place'] = $this->Person->get_define2(7);        $data['result2'] = $data['result22'][1];        $data['metakeyword'] = 'إضافة رأي اللجنة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/Committee/Committee';        $this->load->view('index', $data);    }    public function search_form2($id){        $this->load->model('Committee');        $this->load->model('Members');        $this->load->model('Person');        if($this->input->post('update') == 'تعديل'){            $mem=serialize($_POST['member']);            $date = $this->Greg2Hijri();            $this->Committee->update($mem,$date);            $this->message('success','تم التعديل');            redirect('dashboard/openion/'.$this->uri->segment(3).'','refresh');        }        if($this->input->post('add')){            $mem=serialize($_POST['member']);            $date = $this->Greg2Hijri();            $this->Committee->insert($id,$mem,$date);            $this->message('success','تم الحفظ');            redirect('dashboard/openion/'.$id.'','refresh');        }        $data['all_defines']=$this->Committee->select_defines();        $data['title']='نموذج بحث اجتماعى ميدانى';        $data['result']=$this->Committee->get_person($id);        $data['result3']=$this->Committee->select3($id);        $data['member']=$this->Members->select_ss();        $data['result22']=$this->Committee->select2();        $data['place'] = $this->Person->get_define2(7);        $data['result2'] = $data['result22'][0];        $data['result4'] = $data['result22'][1];        $data['propety'] = $this->Committee->get_define(5);        $data['living_type'] = $this->Committee->get_define(6);        $data['metakeyword'] = 'إضافة بيانات';        $data['metadiscription'] = '';        $data['subview'] = 'admin/Committee/search_form2';        $this->load->view('index', $data);    }    /*****************************************************************/    public function search_lagna(){        $this->load->model('Search');        $this->load->model('Person');        $data['title']='قرار مجلس الإدارة';        $data['records'] = $this->Search->select4();        //$this->test($data['records']);        $data['result22']=$this->Search->select2();        $data['result2'] = $data['result22'][1];        $data['place'] = $this->Person->get_define2(7);        $data['metakeyword'] = 'قرار مجلس الإدارة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search/search';        $this->load->view('index', $data);    }    public function search_form3($id){        $this->load->model('Search');        $this->load->model('Members');        $this->load->model('Person');        $this->load->model('Researcher');        $this->load->model('Client');        $data['client'] = $this->Client->select2();        if($this->input->post('update') == 'تعديل'){            $mem=serialize($_POST['member']);            $date=$this->Greg2Hijri();            $this->Search->update($mem,$date);            $this->message('success','تم التعديل');            //redirect('dashboard/search_lagna','refresh');           // redirect('dashboard/print_search_form/'.$this->uri->segment(3).'','refresh');            redirect('dashboard/print_search_form/'.$this->input->post('id').'','refresh');        }        if($this->input->post('add')){            $date=$this->Greg2Hijri();            $mem=serialize($_POST['member']);            $this->Search->insert($id,$mem,$date);            $this->message('success','تم الحفظ');            //redirect('dashboard/search_lagna','refresh');          //  redirect('dashboard/print_search_form/'.$this->uri->segment(3).'','refresh');            redirect('dashboard/print_search_form/'.$this->input->post('id').'','refresh');        }        $data['all_defines']=$this->Search->select_defines();        $data['all_definess']=$this->Search->select_defines();        $data['social_status'] = $this->Person->get_define(4);        $data['title']='إضافة رأي مجلس الإدارة';        $data['result']=$this->Search->get_person($id);        $data['result3']=$this->Search->select3($id);        //$data['client']=$this->Search->get_client($data['result3'][0]->researcher_id);        $data['member']=$this->Members->select_ss();        $data['result22']=$this->Search->select2();        $data['result2'] = $data['result22'][0];        $data['result4'] = $data['result22'][1];        $data['result22']=$this->Researcher->select2();        $data['result55'] = $data['result22'][0];        $data['result66'] = $data['result22'][1];        $date = $this->Greg2Hijri();        $data['date']= $date;        $data['propety'] = $this->Search->get_define(5);        $data['living_type'] = $this->Search->get_define(6);        $data['metakeyword'] = 'إضافة بيانات';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search/search_form3';        $this->load->view('index', $data);    }    public function print_search_form($id){        $this->load->model('Search');        $this->load->model('Researcher');        $this->load->model('Main_data');        $data['debaga']=$this->Main_data->select_data();        $this->load->model('Client');        $data['client'] = $this->Client->select2();        $data['all_defines']=$this->Search->select_defines();        $data['all_data'] = $this->Search->all_data_id($id);        $data['result22']=$this->Researcher->select2();        $data['result55'] = $data['result22'][0];        $data['result66'] = $data['result22'][1];        //$data['client']=$this->Search->get_client($data['all_data'][0]->researcher_id);        $data['date']  = $this->Greg2Hijri();        $this->load->model('Members');        $data['member']=$this->Members->select_ss();        $data['title']='طباعة نتيجة البحث وقرار مجلس الإدارة';        $data['metakeyword'] = 'طباعة نتيجة البحث وقرار مجلس الإدارة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search/print';        $this->load->view('index', $data);    }    /*********************/    public function person_report(){        $this->load->model('Person');        $data['records'] = $this->Person->select_data();        $data['title'] = 'تقارير طلبات المستفيدين';        $data['subview'] = 'admin/reports/person_report';        $this->load->view('index', $data);    }    public function client_report(){        $this->load->model('Client');        $data['records'] = $this->Client->select(10000000000);        $data['title'] = 'تقارير الموظفين و الباحثين';        $data['subview'] = 'admin/reports/client_report';        $this->load->view('index', $data);    }    public function members_report(){        $this->load->model('Members');        $data['records'] = $this->Members->select(10000000000);        $data['title'] = 'تقارير الأدارة';        $data['subview'] = 'admin/reports/members_report';        $this->load->view('index', $data);    }    public function requests(){        $this->load->model('Person');        $this->load->model('Researcher');        $this->load->model('Search');        $this->load->model('Client');        $data['client'] = $this->Client->select2();        $data['records'] = $this->Person->select_data();        $data['health_state'] = $this->Person->get_define(3);        $data['house_type'] = $this->Person->get_define(1);        $data['house_state'] = $this->Person->get_define(2);        $data['social_status'] = $this->Person->get_define(4);        $data['place'] = $this->Person->get_define2(7);        $data['result22']=$this->Researcher->select2();        $data['result2'] = $data['result22'][0];        $data['result3'] = $data['result22'][1];        $data['result11']=$this->Search->select2();        $data['result1'] = $data['result11'][0];        $data['result4'] = $data['result11'][1];        $data['title'] = 'تقارير طلبات المستفيدين';        $data['subview'] = 'admin/reports/requests';        $this->load->view('index', $data);    }    function HijriToJD($d, $m, $y)    {        $day   = (int) $d;        $month = (int) $m;        $year  = (int) $y;        $jd = $this->intPart((11*$year+3) / 30) + 354 * $year + 30 * $month - $this->intPart(($month-1)/2) + $day + 1948440 - 385;        if ($jd > 2299160)        {            $l = $jd+68569;            $n = $this->intPart((4*$l)/146097);            $l = $l-$this->intPart((146097*$n+3)/4);            $i = $this->intPart((4000*($l+1))/1461001);            $l = $l-$this->intPart((1461*$i)/4)+31;            $j = $this->intPart((80*$l)/2447);            $day = $l-$this->intPart((2447*$j)/80);            $l = $this->intPart($j/11);            $month = $j+2-12*$l;            $year  = 100*($n-49)+$i+$l;        }        else        {            $j = $jd+1402;            $k = $this->intPart(($j-1)/1461);            $l = $j-1461*$k;            $n = $this->intPart(($l-1)/365)-$this->intPart($l/1461);            $i = $l-365*$n+30;            $j = $this->intPart((80*$i)/2447);            $day = $i-$this->intPart((2447*$j)/80);            $i = $this->intPart($j/11);            $month = $j+2-12*$i;            $year = 4*$k+$n+$i-4716;        }        $data = array();        $date['year']  = $year;        $date['month'] = $month;        $date['day']   = $day;        return     "{$year}-{$month}-{$day}";    }    public function reseachers_count(){        $this->load->model('Researcher');        $data['researcher'] = $this->Researcher->count_num();        $data['title'] = 'تقرير الباحثين';        $data['subview'] = 'admin/reports/researchers';        $this->load->view('index', $data);    }    public function print_lagna(){        $this->load->model('Search');        $this->load->model('Person');        $data['title']='المتقدمين بطلب المساعدة';        $data['records'] = $this->Search->select();        $data['result22']=$this->Search->select2();        $data['result2'] = $data['result22'][1];        $data['lagna']=$this->Search->select_lagna();        $data['place'] = $this->Person->get_define2(7);        if(isset($data['lagna'])&& $data['lagna']!=null){            for($x=0;$x<count($data['lagna']);$x++){                $ee[$data['lagna'][$x]->person_id]= $this->Search->getById2($data['lagna'][$x]->person_id);            }            $data['person']= $ee;        }else{        }        $data['metakeyword'] = 'المتقدمين بطلب المساعدة';        $data['metadiscription'] = '';        $data['subview'] = 'admin/search/lagna_info';        $this->load->view('index', $data);    }    public function requests_period()    {        $this->load->model('Person');        $this->load->model('Researcher');        $this->load->model('Search');        $this->load->model('Client');        $data['client'] = $this->Client->select2();        $data['health_state'] = $this->Person->get_define(3);        $data['house_type'] = $this->Person->get_define(1);        $data['house_state'] = $this->Person->get_define(2);        $data['social_status'] = $this->Person->get_define(4);        $data['place'] = $this->Person->get_define2(7);        $data['title'] = 'تقرير طلبات مساعدة خلال فترة';        if($this->input->post('date_from') && $this->input->post('date_to'))        {            $date_from = explode('/',$this->input->post('date_from'));            $date_from = $this->HijriToJD($date_from[2],$date_from[1],$date_from[0]);            $date_to = explode('/',$this->input->post('date_to'));            $date_to = $this->HijriToJD($date_to[2],$date_to[1],$date_to[0]);            $data['records'] = $this->Person->select_data_period($date_from,$date_to);            $data['result22']=$this->Researcher->select2();            $data['result2'] = $data['result22'][0];            $data['result3'] = $data['result22'][1];            $data['result11']=$this->Search->select2();            $data['result1'] = $data['result11'][0];            $data['result4'] = $data['result11'][1];            $this->load->view('admin/reports/load_requests_period', $data);        }        else{            $data['metadiscription'] = '';            $data['subview'] = 'admin/reports/requests_period';            $this->load->view('index', $data);        }    }    public function print_report(){        $this->load->model('Person');        if($this->input->post('print'))            $this->load_print_report($this->input->post('benefit'),$this->input->post('title'));        else{            $data['benefit'] = $this->Person->get_define(8);            $data['title'] = 'تقرير السلة الرمضانية';            $data['subview'] = 'admin/print_report/print_report';            $this->load->view('index', $data);        }    }    public function load_print_report($benefit,$title){        $this->load->model('Person');        $this->load->model('All_defined');        $this->load->model('Main_data');        $data['debaga']=$this->Main_data->select_data();        $data['records'] = $this->Person->print_report($benefit);        $data['define'] = $this->All_defined->select('');        $data['address'] = $title;        $this->load->view('admin/print_report/load_print_report', $data);    } public function add_opinion(){     $this->load->model("Opinion");     $this->load->model("Difined_model");         if($this->input->post("add")){           $input_name='img';                $file=$this->upload_image($input_name);          $this->Opinion->insert($file);        $this->message('success', 'إضافة رأي');        redirect('dashboard/add_opinion','refresh');     }         $data['records']=$this->Difined_model->select_all("opinions","","","",'');              $data['title'] = 'اراء بعض الناس عن الجمعية';     $data['subview'] = 'admin/opinion/opinion';    $this->load->view('index', $data);   }//-------------------------------------------------------------  public function update_opinion($id){     $this->load->model("Opinion");     $this->load->model("Difined_model");     if($this->input->post("edit")){            $input_name='img';                $file=$this->upload_image($input_name);      $this->Opinion->update($id,$file);         $this->message('success', 'تعديل رأي');        redirect('dashboard/add_opinion','refresh');     }         $data['result']=$this->Difined_model->getById("opinions",$id);        $data['title'] = 'اراء بعض الناس عن الجمعية';      $data['subview'] = 'admin/opinion/opinion';    $this->load->view('index', $data);   }  public function delete_opinion($id){     $this->db->where('id',$id);     $this->db->delete('opinions');       redirect('dashboard/add_opinion', 'refresh');    } /**  * ===============================================================================================================  *   */ /** *  ============================================================================================================== * projects * **/public function add_project(){    $this->load->model('Project');    if ($this->input->post('add_project')){        for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)        {            $file_name='img'.$x;            $file[]= $this->upload_image($file_name);        }        $this->Project->insert($file);        $this->message('success','إضافة مشروع');        redirect('dashboard/add_project','refresh');    }    $data['records']=$this->Project->select('');    if($data['records']){        $this->load->model('Users');        for($r = 0 ; $r < count($data['records']) ; $r++)            $data['user'][$r]=$this->Users->display($data['records'][$r]->publisher);}    if($this->input->post('num'))    {        if($this->input->post('num') != 0)        {            $data['result'] = $this->input->post('num');            $this->load->view('admin/projects/photos', $data);        }    }    else{        $data['title'] = 'إضافة مشروع';        $data['subview'] = 'admin/projects/projects';        $this->load->view('index', $data);    }}public function delete_project($id){    $this->load->model('Project');    $this->Project->delete($id);    redirect('dashboard/add_project','refresh');}public function update_project($id){    $this->load->model('Project');    if($this->input->post('update')){        if($this->input->post('photo_num'))        {            if($this->input->post('photo_num') != 0)            {                for($x = 1 ; $x <= $this->input->post('photo_num') ; $x++)                {                    $file_name='img'.$x;                    $file[]= $this->upload_image($file_name);                }            }        }        else            $file = '';        $this->Project->update($id,$file);        $this->message('success','تعديل المشروع');        redirect('dashboard/add_project','refresh');    }    $data['result']=$this->Project->getById($id);    $data["links"] = $this->pagination->create_links();    $data['title'] = 'تعديل مشروع';    $data['subview'] = 'admin/projects/projects';    $this->load->view('index', $data);}public function delete_project_photo($id,$index){    $this->load->model('Project');    $this->Project->delete_photo($id,$index);    redirect('dashboard/update_project/'.$id.'');}public function suspend_project($id,$clas){    $this->load->model('Project');    $this->Project->suspend($id,$clas);    if($clas == 'danger')        $this->message('success','المشروع نشط');    else        $this->message('success','المشروع غير نشط');    redirect('dashboard/add_project');}    }//END CLASSS